if("undefined"===typeof Spurit)var Spurit={};
(function(){if("undefined"===typeof Spurit.selectorPickerEnabled){Spurit.selectorPickerEnabled=!0;var n=NaN,t=!1,x='Set this text using url query: <em>http://site.com/?...&settings={"barMessage"=>"..."}</em>',y='Set this text using url query: <em>http://site.com/?...&settings={"demoText"=>"..."}</em>',u=!1,h={onLoad:function(){},loadInitial:function(){window.opener&&("undefined"===typeof window.__selectorPickerMessageHandlerSet&&(window.__selectorPickerMessageHandlerSet=!0,e.wrElement(window).addHandler("message",
function(b){b=b.data||b.originalEvent.data;if("undefined"!==typeof b.id&&b.id===n&&("undefined"!==typeof b.inital&&(b.initial=b.inital),b.initial&&b.initial.selector)){var a=b.initial.position?b.initial.position:"before";l.show(document.querySelector(b.initial.selector),a);v.set(b.initial.selector,a)}})),e.postMessage({id:n,loadInitial:!0}))},onSave:function(b,a){window.opener&&(e.postMessage({id:n,selector:b,position:a}),window.confirm("Element position has been saved. Close the current window?")&&
window.close())},requireJsonPostMessage:function(){return"undefined"!==typeof f.json},barHtml:'<div style="display:block;position:fixed;left:0;right:0;top:0;height:0;text-align:center"><style type="text/css">.__selector-picker-btn:hover{background:#e6e6e6!important;border-color:#adadad!important;}</style><div style="display:inline-block;min-width:500px;padding:8px 14px;background:#fcf8e3;color:#000;line-height:1;text-align:center;font-size:14px;border-radius:0 0 4px 4px;border:1px solid #faebcc;border-top:0;box-shadow:0 1px 5px 0 rgba(0,0,0,0.4)">[bar-message]<br><button type="button" rel="enable" class="__selector-picker-btn" style="font-size:14px;margin:5px 2px 0 2px;color:#333;background:#fff;border:1px solid #ccc;border-radius:4px;line-height:32px;padding:0 12px">Enable</button><button type="button" rel="save" class="__selector-picker-btn" style="font-size:14px;margin:5px 2px 0 2px;color:#333;background:#fff;border:1px solid #ccc;border-radius:4px;line-height:32px;padding:0 12px">Save</button></div></div>',
barZIndex:999999993,hoverRectangleSidesCss:"background:red",hoverRectangleZIndex:999999991,demoStaticHtml:'<div style="display:block;margin:10px 0;background:#dff0d8;color:#333;border:1px solid #333;padding:10px;font-size:16px;font-weight:normal">[demo-text]</div>',demoOverlaySidesCSS:"background:green",demoOverlayZIndex:999999990,menuHtml:'<div style="display:block;background:#fcf8e3;color:#333;padding:4px 16px;border-radius:4px;border:1px solid #faebcc;box-shadow:0 1px 5px 0 rgba(0,0,0,0.4)"><a href="#" rel="after" style="display:block;line-height:24px;color:#333;">After element</a><a href="#" rel="before" style="display:block;line-height:24px;color:#333;">Before element</a></div>',
menuZIndex:999999992};if("undefined"!==typeof Spurit.selectorPickerConfig)for(var w in Spurit.selectorPickerConfig)h[w]=Spurit.selectorPickerConfig[w];var f=window.location.search.replace("?","").split("&").reduce(function(b,a){var d=a.split("=");b[decodeURIComponent(d[0])]=decodeURIComponent(d[1]);return b},{});"undefined"!==typeof f["selector-picker"]&&(n=parseInt(f["selector-picker"]));isNaN(n)&&console.error("Its required to set script id using url query: http://.../?selector-picker={int}");"undefined"!==
typeof f.settings&&(f.settings=JSON.parse(f.settings),f.settings&&("undefined"!==typeof f.settings.selectPosition&&(t=!!f.settings.selectPosition),"undefined"!==typeof f.settings.barMessage&&(x=f.settings.barMessage),"undefined"!==typeof f.settings.demoText&&(y=f.settings.demoText),"undefined"!==typeof f.settings.disabledByDefault&&(u=!!f.settings.disabledByDefault)));var e=new function(){this.postMessage=function(b){window.opener?(h.requireJsonPostMessage()&&(b=JSON.stringify(b)),window.opener.postMessage(b,
"*")):console.error("Can't send message to opener: window.opener is not defined")};this.scrollPos=function(){var b=document.documentElement,a=document.body;return{left:(b&&b.scrollLeft||a&&a.scrollLeft||0)-(b.clientLeft||0),top:(b&&b.scrollTop||a&&a.scrollTop||0)-(b.clientTop||0)}};this.wrList=function(b){return new function(a){this.forEach=function(d,c){if(null==a)console.error("Argument is null or not defined");else{var g=Object(a);if("undefined"===typeof g.length)console.error(g+" don't have length attribute");
else{var b=g.length>>>0;if("function"!==typeof d)console.error('"'+d+'" is not a function');else{var e;1<arguments.length&&(e=c);for(var p=0;p<b;){if(p in g){var f=g[p];if(!1===d.call(e,f,p,g))break}p++}}}}}}(b)};this.wrElement=function(b){return new function(a){this.addHandler=function(d,c,g){""!==d&&(a.addEventListener?a.addEventListener(d,c,g?g:!1):a.attachEvent?a.attachEvent("on"+d,c):a["on"+d]=c)};this.onChangeContents=function(d){if(a===window||a===document)e.onLoad(function(){e.wrElement(document.body).onChangeContents(d)});
else(new MutationObserver(function(a){d(a)})).observe(a,{childList:!0,subtree:!0})};this.removeHandler=function(a,c,g){""!==a&&(this.addEventListener?this.removeEventListener(a,c,g?g:!1):this.attachEvent?this.detachEvent("on"+a,c):delete this["on"+a])};this.size=function(){return a===window?{w:window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:document.body.offsetWidth,h:window.innerHeight?window.innerHeight:document.documentElement.clientHeight?
document.documentElement.clientHeight:document.body.offsetHeight}:"undefined"!==typeof a.offsetWidth?{w:a.offsetWidth,h:a.offsetHeight}:{w:0,h:0}};this.pos=function(){function d(a){a=a.getBoundingClientRect();var c=document.body,d=document.documentElement;return{x:Math.round(a.left+(window.pageXOffset||d.scrollLeft||c.scrollLeft)-(d.clientLeft||c.clientLeft||0)),y:Math.round(a.top+(window.pageYOffset||d.scrollTop||c.scrollTop)-(d.clientTop||c.clientTop||0))}}function c(a){if("undefined"===typeof a.offsetTop)return{x:0,
y:0};for(var c=0,d=0;a;)c+=parseFloat(a.offsetTop),d+=parseFloat(a.offsetLeft),a=a.offsetParent;return{x:Math.round(d),y:Math.round(c)}}return a.getBoundingClientRect?d(a):c(a)};this.getSelector=function(){if(!a instanceof HTMLElement)return"";if("BODY"===a.tagName)return"body";var d=a.tagName.toLowerCase();a.hasAttribute("id")?d+="#"+a.getAttribute("id"):a.hasAttribute("class")&&(d+='[class="'+a.getAttribute("class")+'"]');var c=document.querySelectorAll(d);if(1===c.length&&c[0]===a)return d;var b=
a.parentNode;c=b.querySelectorAll(d);if(1===c.length&&c[0]===a)return e.wrElement(b).getSelector()+" > "+d;if(1<c.length){d=a.tagName.toLowerCase();var k=0;e.wrList(b.querySelectorAll(":scope > "+d)).forEach(function(c,d){return c===a?(k=d,!1):!0});return e.wrElement(b).getSelector()+" > "+d+":nth-of-type("+(k+1)+")"}return d};this.markAsSpecial=function(){a.setAttribute&&a.setAttribute("data-selector-picker-special","1");e.wrList(a.querySelectorAll("*")).forEach(function(a){a.setAttribute&&a.setAttribute("data-selector-picker-special",
"1")})}}(b)};this.wrEvent=function(b){return new function(a){this.cancelDefault=function(){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;a.preventDefault?a.preventDefault():a.returnValue=!1};this.mouseCoords=function(){if(!a instanceof MouseEvent)return{x:0,y:0};if(null===a.pageX&&null!==a.clientX){var d=e.scrollPos();a.pageX=a.clientX+d.left;a.pageY=a.clientY+d.top}return{x:a.pageX,y:a.pageY}}}(b)};this.onLoad=function(b){"complete"===document.readyState||"interactive"===document.readyState&&
!/MSIE *\d+\.\w+/i.test(window.navigator.userAgent)||"loaded"===document.readyState?b():e.wrElement(document).addHandler("DOMContentLoaded",function(){b()})}},v,q,l,r,m=new function(){var b,a=!1,d=function(c){a&&(c.stopImmediatePropagation&&c.stopImmediatePropagation(),e.wrEvent(c).cancelDefault(),t?r.isShown()?r.hide():(c=e.wrEvent(c).mouseCoords(),r.show(c.x,c.y)):(l.hide(),c=e.wrElement(q.getElement()).getSelector(),v.set(c,"inside"),l.show(document.querySelector(c),"inside")))},c=function(c){a&&
!r.isShown()&&(e.wrEvent(c).cancelDefault(),q.show(this))},g=function(){b=document.body.querySelectorAll("*:not([data-selector-picker-special]):not([data-selector-picker-processed])");e.wrList(b).forEach(function(a){!a instanceof HTMLElement||a instanceof SVGSVGElement||a instanceof SVGPathElement||(e.wrElement(a).addHandler("mouseover",c),e.wrElement(a).addHandler("click",d),a.setAttribute("data-selector-picker-processed","1"))})},k=!1,A=function(){if(!k){var a=k=!0,c=new function(){var c=[],d=0;
this.add=function(b){1===b.nodeType&&(c.push(b),d||(d=setTimeout(function(){a=!1;var d=[],b;e.wrList(c).forEach(function(a){if(a=a.parentNode){var c=[];e.wrList(a.querySelectorAll('[data-selector-picker-special="1"]')).forEach(function(a){a.parentNode&&!a.parentNode.hasAttribute("data-selector-picker-special")&&c.push(a)});e.wrList(c).forEach(function(a){a&&a.parentNode&&(b=document.createElement("span"),b.setAttribute("data-selector-picker-special-temp",d.length),d.push(a),a.parentNode.insertBefore(b,
a),a.parentNode.removeChild(a))});a.innerHTML=a.innerHTML.replace(/data-selector-picker-processed="1"/g,"")}});var k=[];e.wrList(document.querySelectorAll("[data-selector-picker-special-temp]")).forEach(function(a){k.push(a)});e.wrList(k).forEach(function(a){var c=parseInt(a.getAttribute("data-selector-picker-special-temp"));"undefined"!==typeof d[c]&&a.parentNode.insertBefore(d[c],a);a.parentNode.removeChild(a)});c=[];g()},5E3)))}};e.wrElement(window).onChangeContents(function(d){a&&e.wrList(d).forEach(function(a){e.wrList(a.addedNodes).forEach(function(a){c.add(a)})})})}};
this.enable=function(){a||(g(),A(),h.loadInitial(),a=!0)};this.disable=function(){a=!1};this.isEnabled=function(){return a}};e.onLoad(function(){h.onLoad();var b;(function(){b=document.createElement("div");b.innerHTML=h.barHtml.replace("[bar-message]",x);1===b.childNodes.length&&1===b.childNodes[0].nodeType&&(b=b.childNodes[0]);b.style.zIndex=h.barZIndex;document.body.appendChild(b);var a=b.querySelector('[rel="enable"]');u?e.wrElement(a).addHandler("click",function(d){e.wrEvent(d).cancelDefault();
m.isEnabled()?(m.disable(),"undefined"!==typeof a.innerHTML&&(a.innerHTML="Enable"),"undefined"!==typeof a.value&&(a.value="Enable")):(m.enable(),"undefined"!==typeof a.innerHTML&&(a.innerHTML="Disable"),"undefined"!==typeof a.value&&(a.value="Disable"))},!0):a.style.display="none"})();e.wrElement(b).markAsSpecial();v=new function(){var a="",d="before";this.set=function(c,b){a=c;d=b};var c=b.querySelector('[rel="save"]');c?e.wrElement(c).addHandler("click",function(){h.onSave(a,d)}):console.error('Link or Button with attr [rel="save"] are required in top bar')};
q=new function(){for(var a=null,d=[],c,b=0;4>b;b++)c=document.createElement("div"),c.style.cssText=h.hoverRectangleSidesCss,c.style.display="none",c.style.position="absolute",c.style.zIndex=h.hoverRectangleZIndex,c.style.width="1px",c.style.height="1px",document.body.appendChild(c),e.wrElement(c).markAsSpecial(),d.push(c);this.show=function(c){a=c;var b=e.wrElement(a).pos(),g=e.wrElement(a).size(),k=e.wrElement(document.body).pos().y;c=b.x;var f=b.x+g.w-1,h=b.y-k;b=b.y+g.h-k-1;e.wrList(d).forEach(function(a){a.style.display=
"block"});d[0].style.left=c+"px";d[0].style.top=h+"px";d[0].style.width=f-c+"px";d[1].style.left=f+"px";d[1].style.top=h+"px";d[1].style.height=b-h+"px";d[2].style.left=c+"px";d[2].style.top=b+"px";d[2].style.width=f-c+"px";d[3].style.left=c+"px";d[3].style.top=h+"px";d[3].style.height=b-h+"px"};this.hide=function(){a=null;e.wrList(d).forEach(function(a){a.style.display="none"})};this.getElement=function(){return a}};l=new function(){var a=new function(){var a=this,b=document.createElement("div");
b.innerHTML=h.demoStaticHtml.replace("[demo-text]",y);1===b.childNodes.length&&1===b.childNodes[0].nodeType&&(b=b.childNodes[0]);b.style.position="static";document.body.appendChild(b);var d=b.style.display;b.style.display="none";e.wrElement(b).markAsSpecial();a.hide=function(){document.body.appendChild(b);b.style.display="none"};a.show=function(c,e){c&&(b.style.display=d,"before"===e?c.parentNode.insertBefore(b,c):"inside"===e?c.appendChild(b):"after"===e?c.nextElementSibling?a.show(c.nextElementSibling,
"before"):a.show(c.parentNode,"inside"):a.hide())}},b=new function(){for(var a=[],b,d=0;4>d;d++)b=document.createElement("div"),b.style.cssText=h.demoOverlaySidesCSS,b.style.display="none",b.style.position="absolute",b.style.zIndex=h.demoOverlayZIndex,b.style.width="2px",b.style.height="2px",document.body.appendChild(b),e.wrElement(b).markAsSpecial(),a.push(b);this.hide=function(){e.wrList(a).forEach(function(a){a.style.display="none"})};this.show=function(b){if(b){var c=e.wrElement(b).pos(),d=e.wrElement(b).size(),
k=e.wrElement(document.body).pos().y;b=c.x;var g=c.x+d.w-2,f=c.y-k;c=c.y+d.h-k-2;e.wrList(a).forEach(function(a){a.style.display="block"});a[0].style.left=b+"px";a[0].style.top=f+"px";a[0].style.width=g-b+"px";a[1].style.left=g+"px";a[1].style.top=f+"px";a[1].style.height=c-f+"px";a[2].style.left=b+"px";a[2].style.top=c+"px";a[2].style.width=g-b+"px";a[3].style.left=b+"px";a[3].style.top=f+"px";a[3].style.height=c-f+"px"}}};this.hide=function(){t?a.hide():b.hide()};this.show=function(c,d){t?a.show(c,
d):b.show(c)}};r=new function(){var a=this,b=!1,c=document.createElement("div");c.innerHTML=h.menuHtml;1===c.childNodes.length&&1===c.childNodes[0].nodeType&&(c=c.childNodes[0]);c.style.position="absolute";c.style.zIndex=h.menuZIndex;document.body.appendChild(c);var f=c.style.display;c.style.display="none";e.wrElement(c).markAsSpecial();this.show=function(a,d){b=!0;c.style.left=a+"px";c.style.top=d-e.wrElement(document.body).pos().y+"px";c.style.display=f};this.hide=function(){b=!1;c.style.display=
"none"};this.isShown=function(){return b};e.wrList(["before","inside","after"]).forEach(function(b){var d=c.querySelector('[rel="'+b+'"]');d&&e.wrElement(d).addHandler("click",function(c){l.hide();var d=e.wrElement(q.getElement()).getSelector();v.set(d,b);l.show(document.querySelector(d),b);q.hide();a.hide();e.wrEvent(c).cancelDefault()})});e.wrElement(document.body).addHandler("click",function(d){if(b){for(d=d.target;"BODY"!==d.tagName;){if(d===c)return;d=d.parentNode}a.hide()}})};u||m.enable()});
window.SpuritSelectorPickerInit=function(){try{m.enable(),u&&m.disable()}catch(b){console.log(b)}};if(w=document.querySelector("html")){var z=document.createElement("script");z.innerHTML="if(window.SpuritSelectorPickerInit) { window.SpuritSelectorPickerInit(); }";w.appendChild(z)}}})();
